import{q as R,v as L,w as g,x as B,y as E,z as I,A as S,B as Y,C as y,D as U,E as F,F as C,G as $,H,I as K,J as q,K as z,L as G,M as O,N as Z,O as j,n as w,P as J,h as p,Q as D,R as Q,S as V,T as W,U as X,V as k,W as ee,o as se,X as te,Y as re,Z as ne,_ as ae,$ as ie,a0 as fe,j as ue,e as ce,a1 as oe,a2 as le}from"./CW8k7sT-.js";import{s as de,g as _e}from"./u-egiAk0.js";class he{anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#n=!0;constructor(e,r=!0){this.anchor=e,this.#n=r}#a=()=>{var e=R;if(this.#s.has(e)){var r=this.#s.get(e),t=this.#t.get(r);if(t)L(t),this.#r.delete(r);else{var a=this.#e.get(r);a&&(this.#t.set(r,a.effect),this.#e.delete(r),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),t=a.effect)}for(const[n,f]of this.#s){if(this.#s.delete(n),n===e)break;const i=this.#e.get(f);i&&(g(i.effect),this.#e.delete(f))}for(const[n,f]of this.#t){if(n===r||this.#r.has(n))continue;const i=()=>{if(Array.from(this.#s.values()).includes(n)){var o=document.createDocumentFragment();y(f,o),o.append(E()),this.#e.set(n,{effect:f,fragment:o})}else g(f);this.#r.delete(n),this.#t.delete(n)};this.#n||!t?(this.#r.add(n),B(f,i,!1)):i()}}};#i=e=>{this.#s.delete(e);const r=Array.from(this.#s.values());for(const[t,a]of this.#e)r.includes(t)||(g(a.effect),this.#e.delete(t))};ensure(e,r){var t=R,a=U();if(r&&!this.#t.has(e)&&!this.#e.has(e))if(a){var n=document.createDocumentFragment(),f=E();n.append(f),this.#e.set(e,{effect:I(()=>r(f)),fragment:n})}else this.#t.set(e,I(()=>r(this.anchor)));if(this.#s.set(t,e),a){for(const[i,u]of this.#t)i===e?t.unskip_effect(u):t.skip_effect(u);for(const[i,u]of this.#e)i===e?t.unskip_effect(u.effect):t.skip_effect(u.effect);t.oncommit(this.#a),t.ondiscard(this.#i)}else S&&(this.anchor=Y),this.#a()}}function ge(s,e,r=!1){S&&C();var t=new he(s),a=r?$:0;function n(f,i){if(S){const l=H(s);var u;if(l===K?u=0:l===q?u=!1:u=parseInt(l.substring(1)),f!==u){var o=z();G(o),t.anchor=o,O(!1),t.ensure(f,i),O(!0);return}}t.ensure(f,i)}F(()=>{var f=!1;e((i,u=0)=>{f=!0,n(u,i)}),f||n(!1,null)},a)}let b=!1,P=Symbol();function Se(s,e,r){const t=r[e]??={store:null,source:J(void 0),unsubscribe:w};if(t.store!==s&&!(P in r))if(t.unsubscribe(),t.store=s??null,s==null)t.source.v=void 0,t.unsubscribe=w;else{var a=!0;t.unsubscribe=de(s,n=>{a?t.source.v=n:D(t.source,n)}),a=!1}return s&&P in r?_e(s):p(t.source)}function Pe(){const s={};function e(){Z(()=>{for(var r in s)s[r].unsubscribe();j(s,P,{enumerable:!1,value:!0})})}return[s,e]}function ve(s){var e=b;try{return b=!1,[s(),b]}finally{b=e}}const be={get(s,e){if(!s.exclude.includes(e))return s.props[e]},set(s,e){return!1},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function Te(s,e,r){return new Proxy({props:s,exclude:e},be)}function Ae(s,e,r,t){var a=!se||(r&te)!==0,n=(r&re)!==0,f=(r&le)!==0,i=t,u=!0,o=()=>(u&&(u=!1,i=f?ce(t):t),i),l;if(n){var x=ie in s||fe in s;l=Q(s,e)?.set??(x&&e in s?c=>s[e]=c:void 0)}var _,T=!1;n?[_,T]=ve(()=>s[e]):_=s[e],_===void 0&&t!==void 0&&(_=o(),l&&(a&&V(),l(_)));var d;if(a?d=()=>{var c=s[e];return c===void 0?o():(u=!0,c)}:d=()=>{var c=s[e];return c!==void 0&&(i=void 0),c===void 0?i:c},a&&(r&W)===0)return d;if(l){var N=s.$$legacy;return(function(c,v){return arguments.length>0?((!a||!v||N||T)&&l(v?d():c),c):d()})}var m=!1,h=((r&oe)!==0?ue:ne)(()=>(m=!1,d()));n&&p(h);var M=k;return(function(c,v){if(arguments.length>0){const A=v?p(h):a&&n?X(c):c;return D(h,A),m=!0,i!==void 0&&(i=A),c}return ae&&m||(M.f&ee)!==0?h.v:p(h)})}export{he as B,Se as a,ge as i,Ae as p,Te as r,Pe as s};
